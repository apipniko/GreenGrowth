<nav class="bg-[#0BDAAA] border-b border-[#15F275]">
  <div class="max-w-7xl mx-auto px-6">
    <div class="flex items-center h-16 relative">
      <!-- LEFT : LOGO (MOBILE TOGGLE) -->
      <button onclick="toggleMobileMenu()" class="flex items-center gap-3 focus:outline-none md:cursor-default">
        <img src="{{ url_for('static', filename='images/logo.png') }}" alt="Logo" class="w-10 h-10 rounded-full object-cover border-2 border-[#15F275]" />

        <span class="font-bold text-black text-lg"> GreenGrowth </span>
      </button>

      <!-- CENTER : MENU (DESKTOP ONLY) -->
      <div class="absolute left-1/2 -translate-x-1/2 hidden md:block">
        <ul class="flex gap-8 font-medium text-black">
          {% if session.get('logged_in') %} {% if session.get('role') == 'admin' %}
          <li><a href="#" class="hover:text-[#C7FB01] transition">Program</a></li>
          <li><a href="#" class="hover:text-[#C7FB01] transition">Lowongan</a></li>
          <li><a href="#" class="hover:text-[#C7FB01] transition">Artikel</a></li>
          <li><a href="#" class="hover:text-[#C7FB01] transition">Laporan</a></li>
          {% else %}
          <li><a href="{{ url_for('user.dashboard') }}" class="hover:text-[#C7FB01] transition">Home</a></li>
          <li><a href="{{ url_for('artikel_user.list_artikel') }}" class="hover:text-[#C7FB01] transition">Artikel</a></li>
          <li><a href="{{ url_for('lamaran_user.my_activity') }}" class="hover:text-[#C7FB01] transition">My Activity</a></li>
          <li><a href="{{ url_for('lowongan_user.explore') }}" class="hover:text-[#C7FB01] transition">Explore</a></li>
          {% endif %} {% else %}
          <li><a href="/" class="hover:text-[#C7FB01] transition">Home</a></li>
          <li><a href="{{ url_for('auth.login') }}" class="hover:text-[#C7FB01] transition">Lowongan</a></li>
          <li><a href="{{ url_for('auth.login') }}" class="hover:text-[#C7FB01] transition">Artikel</a></li>
          {% endif %}
        </ul>
      </div>

      <!-- RIGHT : ACTION -->
      <div class="ml-auto flex items-center gap-3">
        {% if session.get('logged_in') %}
        <!-- PROFILE -->
        <div class="relative">
          <button onclick="toggleProfileMenu()" class="flex items-center gap-2 focus:outline-none text-black">
            <img
              src="{% set _img = session.get('profile_image') %}
                      {% if _img %}
                          {% if _img.startswith('/static/') or _img.startswith('http') %}
                              {{ _img }}
                          {% else %}
                              {{ url_for('static', filename=_img) }}
                          {% endif %}
                      {% else %}
                          https://cdn-icons-png.flaticon.com/512/892/892781.png
                      {% endif %}"
              class="w-9 h-9 rounded-full object-cover border-2 border-[#15F275]"
              alt="Profile"
              referrerpolicy="no-referrer"
            />

            <span class="hidden md:block font-medium"> {{ session.get('user_name', 'User') }} </span>
          </button>

          <!-- DROPDOWN PROFILE -->
          <div id="profileMenu" class="hidden absolute right-0 mt-2 w-40 bg-white rounded-md shadow-lg z-50">
            {% if session.get('user_id') %}
            <a href="{{ url_for('profile_user.view_profile', user_id=session.get('user_id')) }}" class="block px-4 py-2 text-sm hover:bg-[#C7FB01]/40"> Profil </a>
            {% endif %}

            <a href="{{ url_for('auth.logout') }}" class="block px-4 py-2 text-sm text-red-600 hover:bg-red-50"> Logout </a>
          </div>
        </div>

        {% else %}
        <!-- LOGIN / REGISTER -->
        <a href="{{ url_for('auth.login') }}" class="px-4 py-2 border border-black rounded-md hover:bg-[#15F275] hover:text-black transition font-medium"> Login </a>

        <a href="{{ url_for('auth.register') }}" class="px-4 py-2 border border-black rounded-md hover:bg-[#C7FB01] hover:text-black transition font-medium"> Sign Up </a>
        {% endif %}
      </div>
    </div>
  </div>
</nav>

<!-- MOBILE MENU -->
<div id="mobileMenu" class="md:hidden hidden bg-[#0BDAAA] border-b border-[#15F275]">
  <ul class="flex flex-col gap-4 px-6 py-4 font-medium text-black">
    {% if session.get('logged_in') %} {% if session.get('role') == 'admin' %}
    <li><a href="#" class="hover:text-[#C7FB01]">Program</a></li>
    <li><a href="#" class="hover:text-[#C7FB01]">Lowongan</a></li>
    <li><a href="#" class="hover:text-[#C7FB01]">Artikel</a></li>
    <li><a href="#" class="hover:text-[#C7FB01]">Laporan</a></li>
    {% else %}
    <li><a href="{{ url_for('user.dashboard') }}" class="hover:text-[#C7FB01]">Home</a></li>
    <li><a href="{{ url_for('artikel_user.list_artikel') }}" class="hover:text-[#C7FB01]">Artikel</a></li>
    <li><a href="{{ url_for('lamaran_user.my_activity') }}" class="hover:text-[#C7FB01]">My Activity</a></li>
    <li><a href="{{ url_for('lowongan_user.explore') }}" class="hover:text-[#C7FB01]">Explore</a></li>
    {% endif %} {% else %}
    <li><a href="/" class="hover:text-[#C7FB01]">Home</a></li>
    <li><a href="{{ url_for('auth.login') }}" class="hover:text-[#C7FB01]">Lowongan</a></li>
    <li><a href="{{ url_for('auth.login') }}" class="hover:text-[#C7FB01]">Artikel</a></li>
    {% endif %}
  </ul>
</div>

<script>
  function toggleProfileMenu() {
    document.getElementById("profileMenu")?.classList.toggle("hidden");
  }

  function toggleMobileMenu() {
    document.getElementById("mobileMenu")?.classList.toggle("hidden");
  }
</script>
