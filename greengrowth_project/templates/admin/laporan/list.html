{% extends "admin/layout_admin.html" %} {% block sidebar %} {% include
'admin/sidebar.html' %} {% endblock %} {% block content %}

<!--============================= KONTEN UTAMA ===========================-->
<div class="p-6 flex flex-col h-screen">
  <!--============================= judul halaman ===========================-->
  <h1 class="mt-4 mb-6 text-center text-4xl font-bold text-black">
    List of Reports
  </h1>

  <!--============================= KONTEN UTAMA ===========================-->
  <div class="mt-8 flex-1 flex bg-[#0BDAAA] rounded-3xl p-8 overflow-hidden">
    {% if laporan | length > 0 %}

    <!--============================= SCROLL CONTAINER ===========================-->
    <div class="overflow-y-auto w-full">
      <!--============================= BUTTON TAMBAH ===========================-->
      <div class="flex justify-left mb-6">
        <a
          href="{{ url_for('laporan.create_laporan') }}"
          class="bg-[#15F275] hover:bg-[#C7FB01] text-black font-bold px-8 py-3 rounded-full"
        >
          + create a report
        </a>
      </div>

      <!--============================= LIST LAPORAN ===========================-->
      <div class="space-y-6">
        {% for l in laporan %}
        <div class="bg-black/10 rounded-2xl p-6">
          <div class="flex flex-col md:flex-row gap-6">
            <!--============================= FOTO LAPORAN ===========================-->
            <div class="flex-shrink-0">
              <div class="w-48 h-48 bg-white rounded-xl overflow-hidden">
                {% if l[2] %}
                <img
                  src="{{ url_for('static', filename=l[2]) }}"
                  alt="Foto Laporan"
                  class="w-full h-full object-cover"
                />
                {% else %}
                <div class="w-full h-full flex items-center justify-center">
                  <span class="text-gray-400 font-semibold">No Image</span>
                </div>
                {% endif %}
              </div>
            </div>

            <!--============================= INFO LAPORAN ===========================-->
            <div class="space-y-1">
              <span class="text-black font-bold text-lg">
                {{ l[1] or 'Program tidak tersedia' }}
              </span>

              <div class="md:col-span-2">
                <span class="text-black/70 font-semibold text-sm"
                  >Report Date:</span
                >
                <p class="text-black font-bold">{{ l[3] }}</p>
              </div>

              <div class="md:col-span-2">
                <span class="text-black/70 font-semibold text-sm"
                  >Economic Output:</span
                >
                <p class="text-black font-bold text-lg">
                  Rp {{ "{:,.0f}".format(l[5]|float) if l[5] else '0' }}
                </p>
              </div>

              <div>
                <span class="text-black/70 font-semibold text-sm"
                  >Program Progress:</span
                >
                <p class="text-black font-bold">{{ l[4] }}%</p>
              </div>

              <div class="mt-4">
                <div class="w-full bg-white rounded-full h-3 overflow-hidden">
                  <div
                    class="h-full rounded-full {% if l[4]|float >= 75 %}bg-[#15F275]{% elif l[4]|float >= 50 %}bg-[#C7FB01]{% elif l[4]|float >= 25 %}bg-yellow-400{% else %}bg-red-400{% endif %}"
                    style="width: {{ l[4] }}%"
                  ></div>
                </div>
              </div>
            </div>
          </div>

          <!--============================= BUTTON ACTIONS ===========================-->
          <div
            class="flex justify-end gap-3 mt-4 pt-4 border-t border-black/10"
          >
            <a
              href="{{ url_for('laporan.update_laporan', laporan_id=l[0]) }}"
              class="bg-[#C7FB01] hover:bg-[#15F275] text-black font-semibold px-6 py-2 rounded-full"
            >
              Update
            </a>
            <form
              method="POST"
              action="{{ url_for('laporan.delete_laporan', laporan_id=l[0]) }}"
              onsubmit="return confirm('Yakin ingin menghapus laporan ini?')"
              class="inline"
            >
              <button
                type="submit"
                class="bg-red-500 hover:bg-red-600 text-white font-semibold px-6 py-2 rounded-full"
              >
                Delete
              </button>
            </form>
          </div>
        </div>
        {% endfor %}
      </div>
    </div>

    {% else %}

    <!--============================= JIKA BELUM ADA LAPORAN ===========================-->
    <div class="flex flex-1 flex-col items-center justify-center text-center">
      {% include 'partials/flash.html' %}

      <p class="mb-6 text-lg font-bold text-black">
        No reports have been made yet.
      </p>

      <a
        href="{{ url_for('laporan.create_laporan') }}"
        class="inline-block px-20 py-3 rounded-full font-bold text-black bg-[#15F275] hover:bg-[#C7FB01]"
      >
        Create First Report
      </a>
    </div>

    {% endif %}
  </div>
</div>
{% endblock %}
