{% extends "admin/layout_admin.html" %} {% block sidebar %} {% include 'admin/sidebar.html' %} {% endblock %} {% block content %}
<div class="p-8 flex flex-col gap-6 min-h-screen">
  <div>
    <p class="text-sm uppercase tracking-[0.2em] text-gray-500">Reports</p>
    <h1 class="text-5xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-[#0BDAAA] to-[#15F275] mb-2">Update Report</h1>
    <p class="text-gray-600">Refresh details, progress, and documentation.</p>
  </div>

  {% include 'partials/flash.html' %}

  <div class="bg-white rounded-2xl border border-gray-200 shadow-sm p-8">
    <form method="POST" action="{{ url_for('laporan.update_laporan', laporan_id=laporan_id) }}" enctype="multipart/form-data" class="space-y-6">
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div>
          <label for="program_id" class="block text-black font-bold mb-3 text-sm">Program <span class="text-red-500">*</span></label>
          <select id="program_id" name="program_id" class="w-full px-4 py-3 bg-gray-50 border border-gray-300 rounded-xl text-black focus:outline-none focus:ring-2 focus:ring-[#0BDAAA] focus:border-transparent transition-all" required>
            <option value="" disabled>-- Select Program --</option>
            {% for program in programs %}
            <option value="{{ program[0] }}" {% if program[1] == laporan[1] %}selected{% endif %}>{{ program[1] }}</option>
            {% endfor %}
          </select>
        </div>

        <div>
          <label for="tanggal_laporan" class="block text-black font-bold mb-3 text-sm">Report Date <span class="text-red-500">*</span></label>
          <input type="date" id="tanggal_laporan" name="tanggal_laporan" value="{{ laporan[3] if laporan else '' }}" class="w-full px-4 py-3 bg-gray-50 border border-gray-300 rounded-xl text-black focus:outline-none focus:ring-2 focus:ring-[#0BDAAA] focus:border-transparent transition-all" required />
        </div>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div>
          <label for="laporan_persentase_progres" class="block text-black font-bold mb-3 text-sm">Program Progress (%) <span class="text-red-500">*</span></label>
          <input type="number" id="laporan_persentase_progres" name="laporan_persentase_progres" min="0" max="100" step="0.1" value="{{ laporan[4] if laporan else '' }}" placeholder="0 - 100" class="w-full px-4 py-3 bg-gray-50 border border-gray-300 rounded-xl text-black placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-[#0BDAAA] focus:border-transparent transition-all" required />
          <p class="mt-1 text-xs text-gray-500">Keep between 0 and 100. Decimals allowed.</p>
        </div>

        <div>
          <label for="laporan_output_ekonomi" class="block text-black font-bold mb-3 text-sm">Economic Output (Rp) <span class="text-red-500">*</span></label>
          <input type="number" id="laporan_output_ekonomi" name="laporan_output_ekonomi" min="0" step="0.01" value="{{ laporan[5] if laporan else '' }}" placeholder="Example: 1000000" class="w-full px-4 py-3 bg-gray-50 border border-gray-300 rounded-xl text-black placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-[#0BDAAA] focus:border-transparent transition-all" required />
          <p class="mt-1 text-xs text-gray-500">Enter value in Rupiah (e.g., 15000000).</p>
        </div>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div class="space-y-3">
          <label for="foto_laporan" class="block text-black font-bold mb-1 text-sm">Report Photo</label>
          {% if laporan and laporan[2] %}
          <div class="flex items-start gap-3 bg-gray-50 border border-gray-200 rounded-xl p-3">
            <img src="{{ url_for('static', filename=laporan[2]) }}" alt="Report Photo" class="w-28 h-28 object-cover rounded-lg shadow-sm" />
            <div class="text-sm text-gray-600">
              <p class="font-semibold text-gray-800">Current photo</p>
              <p>Upload a new image to replace.</p>
            </div>
          </div>
          {% endif %}
          <input type="file" id="foto_laporan" name="foto_laporan" accept="image/*" class="w-full px-4 py-3 bg-gray-50 border border-gray-300 rounded-xl text-black focus:outline-none file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-bold file:bg-[#0BDAAA] file:text-black hover:file:bg-[#15F275] cursor-pointer" />
          <p class="mt-1 text-xs text-gray-500">Formats: JPG, PNG, JPEG. Max 5MB. Leave empty to keep current photo.</p>
        </div>

        <div class="bg-gray-50 border border-dashed border-gray-200 rounded-xl p-4 text-sm text-gray-600">
          <p class="font-semibold text-gray-800 mb-2">Notes</p>
          <ul class="space-y-1 list-disc list-inside">
            <li>Ensure date and output match finance records.</li>
            <li>Use clear images that reflect progress.</li>
            <li>Double-check percentages before saving.</li>
          </ul>
        </div>
      </div>

      <div class="flex justify-end gap-3 pt-6 border-t border-gray-200">
        <a href="{{ url_for('laporan.read_laporan') }}" class="px-6 py-3 bg-gray-200 hover:bg-gray-300 text-black font-bold rounded-lg transition-colors inline-flex items-center gap-2">
          <i class="fas fa-arrow-left"></i>
          <span>Cancel</span>
        </a>
        <button type="submit" class="px-8 py-3 bg-gradient-to-r from-[#0BDAAA] to-[#15F275] text-black font-bold rounded-lg hover:shadow-lg transition-all inline-flex items-center gap-2">
          <i class="fas fa-save"></i>
          <span>Save Changes</span>
        </button>
      </div>
    </form>
  </div>
</div>
{% endblock %}