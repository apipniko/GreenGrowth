{% extends "admin/layout_admin.html" %} 
{% block sidebar %} 
{% include 'admin/sidebar.html' %} 
{% endblock %}

{% block content %}

<!--============================= KONTEN UTAMA ===========================-->
<div class="p-8 flex flex-col gap-6 min-h-screen">
  <!--============================= judul halaman ===========================-->
  <div>
    <h1 class="text-5xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-[#0BDAAA] to-[#15F275] mb-2">
      Edit Article
    </h1>
    <p class="text-gray-600">Update your article content</p>
  </div>

{% include 'partials/flash.html' %}

  <!--============================= INPUT FORM ===========================-->
  <div class="bg-white rounded-2xl border border-gray-200 shadow-sm p-8 flex-1 overflow-hidden">
    <div class="overflow-y-auto h-full">
    <form
      action="{{ url_for('artikel.edit', artikel_id=artikel.artikel_id) }}"
      method="post"
      enctype="multipart/form-data"
      class="space-y-6"
    >
      <input type="hidden" name="id" value="{{ artikel.artikel_id }}" />

      <!--============================= judul artikel ===========================-->
      <div>
        <label
          for="judul_artikel"
          class="block text-black font-bold mb-3 text-sm"
        >
          Article Title <span class="text-red-500">*</span>
        </label>
        <input
          type="text"
          id="judul_artikel"
          name="judul_artikel"
          value="{{ artikel.judul_artikel }}"
          placeholder="Enter the article title"
          class="w-full px-4 py-3 bg-gray-50 border border-gray-300 rounded-xl text-black placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-[#0BDAAA] focus:border-transparent transition-all"
          required
        />
      </div>

      <!--============================= deskripsi artikel ===========================-->
      <div>
        <label
          for="deskripsi"
          class="block text-black font-bold mb-3 text-sm"
        >
          Article Description <span class="text-red-500">*</span>
        </label>
        <textarea
          id="deskripsi"
          name="deskripsi"
          rows="6"
          placeholder="Enter the article description"
          class="w-full px-4 py-3 bg-gray-50 border border-gray-300 rounded-xl text-black placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-[#0BDAAA] focus:border-transparent transition-all resize-vertical"
          required
        >{{ artikel.deskripsi }}</textarea>
      </div>

      <!--============================= pilih program ===========================-->
      <div>
        <label
          for="program_id"
          class="block text-black font-bold mb-3 text-sm"
        >
          Related Program <span class="text-red-500">*</span>
        </label>
        <div class="relative">
          <select
            id="program_id"
            name="program_id"
            class="w-full px-4 py-3 bg-gray-50 border border-gray-300 rounded-xl text-black focus:outline-none focus:ring-2 focus:ring-[#0BDAAA] focus:border-transparent transition-all"
            required
          >
            <option value="" disabled {% if not artikel.program_id %}selected{% endif %}>
              -- Select Program --
            </option>

            {% for p in programs %}
            <option
              value="{{ p.id }}"
              {% if p.id|string == artikel.program_id|string %}selected{% endif %}
            >
              {{ p.nama if p.nama else 'Program ' ~ p.id }}
            </option>
            {% endfor %}
          </select>
        </div>
      </div>

      <!--============================= upload foto ===========================-->
      <div>
        <label
          for="foto_artikel"
          class="block text-black font-bold mb-3 text-sm"
        >
          Article Cover Image
        </label>
        
        <!--============================= preview foto lama ===========================-->
        {% if artikel.foto_artikel %}
        <div class="mb-4 p-4 bg-gray-50 rounded-xl border border-gray-200">
          <p class="text-xs text-gray-600 font-semibold mb-3">Current Image:</p>
          <img
            src="{{ url_for('static', filename=artikel.foto_artikel) }}"
            alt="preview"
            class="w-64 h-auto rounded-lg shadow-md border border-gray-200"
          />
        </div>
        {% endif %}

        <div class="relative">
          <input
            type="file"
            id="foto_artikel"
            name="foto_artikel"
            accept="image/*"
            class="w-full px-4 py-3 bg-gray-50 border border-gray-300 border-dashed rounded-xl text-black focus:outline-none focus:ring-2 focus:ring-[#0BDAAA] focus:border-transparent file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-bold file:bg-[#0BDAAA] file:text-black hover:file:bg-[#15F275] cursor-pointer transition-all"
          />
        </div>
        <p class="mt-2 text-xs text-gray-600 font-medium">
          <i class="fas fa-info-circle mr-1"></i>
          Supported formats: JPG, PNG, JPEG. Max 5MB. Leave blank to keep current image.
        </p>
      </div>

      <!--============================= BAGIAN BUTTON ===========================-->
      <div class="flex justify-end gap-3 pt-8 border-t border-gray-200">
        <a
          href="{{ url_for('artikel.index') }}"
          class="px-6 py-3 bg-gray-200 hover:bg-gray-300 text-black font-bold rounded-lg transition-colors inline-flex items-center gap-2"
        >
          <i class="fas fa-arrow-left"></i> Cancel
        </a>
        <button
          type="submit"
          class="px-8 py-3 bg-gradient-to-r from-[#0BDAAA] to-[#15F275] text-black font-bold rounded-lg hover:shadow-lg transition-all inline-flex items-center gap-2"
        >
          <i class="fas fa-save"></i> Update Article
        </button>
      </div>
    </form>
    </div>
  </div>
</div>
{% endblock %}