<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{% block title %}GreenGrowth{% endblock %}</title>
    <script src="https://cdn.tailwindcss.com"></script>
  </head>

  <body class="{% block body_class %}bg-white font-sans overflow-x-hidden{% endblock %}">

    {% block nav %}{% endblock %}

    <!-- ================== FLASH MESSAGE ================== -->
  {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
      <div id="flash-global" class="fixed top-10 left-1/2 transform -translate-x-1/2 flex flex-col items-center space-y-3 z-50">
        {% for category, message in messages %}
          <div class="px-5 py-3 rounded-lg shadow-md text-sm font-medium max-w-lg break-words
                      transition transform duration-500
                      {% if category == 'success' %}bg-emerald-500 text-white{% else %}bg-red-500 text-white{% endif %}">
            {{ message }}
            </div>
          {% endfor %}
        </div>
      {% endif %}
    {% endwith %}

    {% block header %}{% endblock %}

    <main class="min-h-screen grid grid-cols-1 md:grid-cols-2 gap-0">
      {% block home %}{% endblock %}
      {% block aside %}{% endblock %}
      {% block article %}{% endblock %}
    </main>

    <footer>{% block footer %}{% endblock %}</footer>

    <script>
      document.querySelectorAll('#flash-global > div').forEach(el => {
        el.style.transform = 'translateY(-20px)';
        el.style.opacity = '0';
        setTimeout(() => {
          el.style.transition = 'all 0.5s ease';
          el.style.transform = 'translateY(0)';
          el.style.opacity = '1';
        }, 50);
      });

      setTimeout(() => {
        document.querySelectorAll('#flash-global > div').forEach(el => {
          el.style.transition = 'all 0.5s ease';
          el.style.transform = 'translateY(-20px)';
          el.style.opacity = '0';
          setTimeout(() => el.remove(), 500);
        });
      }, 3000);
    </script>

  </body>
</html>
